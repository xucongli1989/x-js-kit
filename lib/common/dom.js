"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.appendElementToLimitContainer = appendElementToLimitContainer;

/**
 * 在指定容器的开头或末尾追加一个子元素，并且限制此容器内的子元素的最大数量。如果超出最大数量，则显示一个占位元素
 * 应用场景：一个 div 需要实时显示无数条日志，每条日志占用一行，当日志过多时，限制显示的数量，并展示一个【更多】按钮供用户单击查看完整日志
 * @param containerElement 外层容器
 * @param subElement 子元素
 * @param maxCount 最大子元素数量
 * @param ellipsisElement 当子元素超过最大数量时，显示一个省略占位元素，如：<p>...</p>
 * @param isInsertToStart 是否将子元素追加到容器的开头
 */
function appendElementToLimitContainer(containerElement, subElement, maxCount, ellipsisElement, isInsertToStart) {
  var result = {};
  result.isOverflow = false;

  if (!containerElement || !subElement) {
    return result;
  }

  var conEle = containerElement;

  if (isInsertToStart && conEle.firstChild) {
    conEle.insertBefore(subElement, conEle.firstChild);
  } else {
    conEle.appendChild(subElement);
  } //超出范围


  if (conEle._x_js_kit_limit_edge_index > 0) {
    if (!conEle._x_js_kit_limit_inserted_ellipsis) {
      conEle.insertBefore(ellipsisElement, conEle.childNodes[conEle._x_js_kit_limit_edge_index]);
      conEle._x_js_kit_limit_inserted_ellipsis = true;
    }

    conEle.removeChild(conEle.childNodes[conEle._x_js_kit_limit_edge_index + 1]);
    result.isOverflow = true;
    return result;
  } //正常范围


  var childLength = containerElement.childNodes.length;

  if (childLength == maxCount) {
    conEle._x_js_kit_limit_edge_index = Math.ceil(childLength / 2);
  }

  return result;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb21tb24vZG9tLnRzIl0sIm5hbWVzIjpbImFwcGVuZEVsZW1lbnRUb0xpbWl0Q29udGFpbmVyIiwiY29udGFpbmVyRWxlbWVudCIsInN1YkVsZW1lbnQiLCJtYXhDb3VudCIsImVsbGlwc2lzRWxlbWVudCIsImlzSW5zZXJ0VG9TdGFydCIsInJlc3VsdCIsImlzT3ZlcmZsb3ciLCJjb25FbGUiLCJmaXJzdENoaWxkIiwiaW5zZXJ0QmVmb3JlIiwiYXBwZW5kQ2hpbGQiLCJfeF9qc19raXRfbGltaXRfZWRnZV9pbmRleCIsIl94X2pzX2tpdF9saW1pdF9pbnNlcnRlZF9lbGxpcHNpcyIsImNoaWxkTm9kZXMiLCJyZW1vdmVDaGlsZCIsImNoaWxkTGVuZ3RoIiwibGVuZ3RoIiwiTWF0aCIsImNlaWwiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFPQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyxTQUFTQSw2QkFBVCxDQUNIQyxnQkFERyxFQUVIQyxVQUZHLEVBR0hDLFFBSEcsRUFJSEMsZUFKRyxFQUtIQyxlQUxHLEVBTW9DO0FBQ3ZDLE1BQU1DLE1BQU0sR0FBRyxFQUFmO0FBQ0FBLEVBQUFBLE1BQU0sQ0FBQ0MsVUFBUCxHQUFvQixLQUFwQjs7QUFDQSxNQUFJLENBQUNOLGdCQUFELElBQXFCLENBQUNDLFVBQTFCLEVBQXNDO0FBQ2xDLFdBQU9JLE1BQVA7QUFDSDs7QUFDRCxNQUFNRSxNQUFNLEdBQUdQLGdCQUFmOztBQVlBLE1BQUlJLGVBQWUsSUFBSUcsTUFBTSxDQUFDQyxVQUE5QixFQUEwQztBQUN0Q0QsSUFBQUEsTUFBTSxDQUFDRSxZQUFQLENBQW9CUixVQUFwQixFQUFnQ00sTUFBTSxDQUFDQyxVQUF2QztBQUNILEdBRkQsTUFFTztBQUNIRCxJQUFBQSxNQUFNLENBQUNHLFdBQVAsQ0FBbUJULFVBQW5CO0FBQ0gsR0F0QnNDLENBdUJ2Qzs7O0FBQ0EsTUFBSU0sTUFBTSxDQUFDSSwwQkFBUCxHQUFvQyxDQUF4QyxFQUEyQztBQUN2QyxRQUFJLENBQUNKLE1BQU0sQ0FBQ0ssaUNBQVosRUFBK0M7QUFDM0NMLE1BQUFBLE1BQU0sQ0FBQ0UsWUFBUCxDQUFvQk4sZUFBcEIsRUFBcUNJLE1BQU0sQ0FBQ00sVUFBUCxDQUFrQk4sTUFBTSxDQUFDSSwwQkFBekIsQ0FBckM7QUFDQUosTUFBQUEsTUFBTSxDQUFDSyxpQ0FBUCxHQUEyQyxJQUEzQztBQUNIOztBQUNETCxJQUFBQSxNQUFNLENBQUNPLFdBQVAsQ0FBbUJQLE1BQU0sQ0FBQ00sVUFBUCxDQUFrQk4sTUFBTSxDQUFDSSwwQkFBUCxHQUFvQyxDQUF0RCxDQUFuQjtBQUNBTixJQUFBQSxNQUFNLENBQUNDLFVBQVAsR0FBb0IsSUFBcEI7QUFDQSxXQUFPRCxNQUFQO0FBQ0gsR0FoQ3NDLENBaUN2Qzs7O0FBQ0EsTUFBTVUsV0FBVyxHQUFHZixnQkFBZ0IsQ0FBQ2EsVUFBakIsQ0FBNEJHLE1BQWhEOztBQUNBLE1BQUlELFdBQVcsSUFBSWIsUUFBbkIsRUFBNkI7QUFDekJLLElBQUFBLE1BQU0sQ0FBQ0ksMEJBQVAsR0FBb0NNLElBQUksQ0FBQ0MsSUFBTCxDQUFVSCxXQUFXLEdBQUcsQ0FBeEIsQ0FBcEM7QUFDSDs7QUFDRCxTQUFPVixNQUFQO0FBQ0giLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgaW50ZXJmYWNlIEFwcGVuZEVsZW1lbnRUb0xpbWl0Q29udGFpbmVyUmVzdWx0VHlwZSB7XHJcbiAgICAvKipcclxuICAgICAqIOWtkOWFg+e0oOaYr+WQpui2heWHuuacgOWkp+iMg+WbtFxyXG4gICAgICovXHJcbiAgICBpc092ZXJmbG93OiBib29sZWFuXHJcbn1cclxuXHJcbi8qKlxyXG4gKiDlnKjmjIflrprlrrnlmajnmoTlvIDlpLTmiJbmnKvlsL7ov73liqDkuIDkuKrlrZDlhYPntKDvvIzlubbkuJTpmZDliLbmraTlrrnlmajlhoXnmoTlrZDlhYPntKDnmoTmnIDlpKfmlbDph4/jgILlpoLmnpzotoXlh7rmnIDlpKfmlbDph4/vvIzliJnmmL7npLrkuIDkuKrljaDkvY3lhYPntKBcclxuICog5bqU55So5Zy65pmv77ya5LiA5LiqIGRpdiDpnIDopoHlrp7ml7bmmL7npLrml6DmlbDmnaHml6Xlv5fvvIzmr4/mnaHml6Xlv5fljaDnlKjkuIDooYzvvIzlvZPml6Xlv5fov4flpJrml7bvvIzpmZDliLbmmL7npLrnmoTmlbDph4/vvIzlubblsZXnpLrkuIDkuKrjgJDmm7TlpJrjgJHmjInpkq7kvpvnlKjmiLfljZXlh7vmn6XnnIvlrozmlbTml6Xlv5dcclxuICogQHBhcmFtIGNvbnRhaW5lckVsZW1lbnQg5aSW5bGC5a655ZmoXHJcbiAqIEBwYXJhbSBzdWJFbGVtZW50IOWtkOWFg+e0oFxyXG4gKiBAcGFyYW0gbWF4Q291bnQg5pyA5aSn5a2Q5YWD57Sg5pWw6YePXHJcbiAqIEBwYXJhbSBlbGxpcHNpc0VsZW1lbnQg5b2T5a2Q5YWD57Sg6LaF6L+H5pyA5aSn5pWw6YeP5pe277yM5pi+56S65LiA5Liq55yB55Wl5Y2g5L2N5YWD57Sg77yM5aaC77yaPHA+Li4uPC9wPlxyXG4gKiBAcGFyYW0gaXNJbnNlcnRUb1N0YXJ0IOaYr+WQpuWwhuWtkOWFg+e0oOi/veWKoOWIsOWuueWZqOeahOW8gOWktFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGFwcGVuZEVsZW1lbnRUb0xpbWl0Q29udGFpbmVyKFxyXG4gICAgY29udGFpbmVyRWxlbWVudDogSFRNTEVsZW1lbnQsXHJcbiAgICBzdWJFbGVtZW50OiBIVE1MRWxlbWVudCxcclxuICAgIG1heENvdW50OiBudW1iZXIsXHJcbiAgICBlbGxpcHNpc0VsZW1lbnQ6IEhUTUxFbGVtZW50LFxyXG4gICAgaXNJbnNlcnRUb1N0YXJ0PzogYm9vbGVhblxyXG4pOiBBcHBlbmRFbGVtZW50VG9MaW1pdENvbnRhaW5lclJlc3VsdFR5cGUge1xyXG4gICAgY29uc3QgcmVzdWx0ID0ge30gYXMgQXBwZW5kRWxlbWVudFRvTGltaXRDb250YWluZXJSZXN1bHRUeXBlXHJcbiAgICByZXN1bHQuaXNPdmVyZmxvdyA9IGZhbHNlXHJcbiAgICBpZiAoIWNvbnRhaW5lckVsZW1lbnQgfHwgIXN1YkVsZW1lbnQpIHtcclxuICAgICAgICByZXR1cm4gcmVzdWx0XHJcbiAgICB9XHJcbiAgICBjb25zdCBjb25FbGUgPSBjb250YWluZXJFbGVtZW50IGFzIEhUTUxFbGVtZW50ICYge1xyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOiMg+WbtOi+ueeVjOWFg+e0oFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjYW1lbGNhc2VcclxuICAgICAgICBfeF9qc19raXRfbGltaXRfZWRnZV9pbmRleDogbnVtYmVyXHJcbiAgICAgICAgLyoqXHJcbiAgICAgICAgICog5piv5ZCm5bey5o+S5YWl55yB55Wl5Y2g5L2N5YWD57SgXHJcbiAgICAgICAgICovXHJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIGNhbWVsY2FzZVxyXG4gICAgICAgIF94X2pzX2tpdF9saW1pdF9pbnNlcnRlZF9lbGxpcHNpczogYm9vbGVhblxyXG4gICAgfVxyXG4gICAgaWYgKGlzSW5zZXJ0VG9TdGFydCAmJiBjb25FbGUuZmlyc3RDaGlsZCkge1xyXG4gICAgICAgIGNvbkVsZS5pbnNlcnRCZWZvcmUoc3ViRWxlbWVudCwgY29uRWxlLmZpcnN0Q2hpbGQpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGNvbkVsZS5hcHBlbmRDaGlsZChzdWJFbGVtZW50KVxyXG4gICAgfVxyXG4gICAgLy/otoXlh7rojIPlm7RcclxuICAgIGlmIChjb25FbGUuX3hfanNfa2l0X2xpbWl0X2VkZ2VfaW5kZXggPiAwKSB7XHJcbiAgICAgICAgaWYgKCFjb25FbGUuX3hfanNfa2l0X2xpbWl0X2luc2VydGVkX2VsbGlwc2lzKSB7XHJcbiAgICAgICAgICAgIGNvbkVsZS5pbnNlcnRCZWZvcmUoZWxsaXBzaXNFbGVtZW50LCBjb25FbGUuY2hpbGROb2Rlc1tjb25FbGUuX3hfanNfa2l0X2xpbWl0X2VkZ2VfaW5kZXhdKVxyXG4gICAgICAgICAgICBjb25FbGUuX3hfanNfa2l0X2xpbWl0X2luc2VydGVkX2VsbGlwc2lzID0gdHJ1ZVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25FbGUucmVtb3ZlQ2hpbGQoY29uRWxlLmNoaWxkTm9kZXNbY29uRWxlLl94X2pzX2tpdF9saW1pdF9lZGdlX2luZGV4ICsgMV0pXHJcbiAgICAgICAgcmVzdWx0LmlzT3ZlcmZsb3cgPSB0cnVlXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgfVxyXG4gICAgLy/mraPluLjojIPlm7RcclxuICAgIGNvbnN0IGNoaWxkTGVuZ3RoID0gY29udGFpbmVyRWxlbWVudC5jaGlsZE5vZGVzLmxlbmd0aFxyXG4gICAgaWYgKGNoaWxkTGVuZ3RoID09IG1heENvdW50KSB7XHJcbiAgICAgICAgY29uRWxlLl94X2pzX2tpdF9saW1pdF9lZGdlX2luZGV4ID0gTWF0aC5jZWlsKGNoaWxkTGVuZ3RoIC8gMilcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHRcclxufVxyXG4iXX0=