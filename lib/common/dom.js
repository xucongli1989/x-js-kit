"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.appendElementToLimitContainer = appendElementToLimitContainer;

/**
 * 在指定容器的末尾追加一个子元素，并且限制此容器内的子元素的最大数量。如果超出最大数量，则显示一个占位元素
 * 应用场景：一个 div 需要实时显示无数条日志，每条日志占用一行，当日志过多时，限制显示的数量，并展示一个【更多】按钮供用户单击查看完整日志
 * @param containerElement 外层容器
 * @param subElement 子元素
 * @param maxCount 最大子元素数量
 * @param ellipsisElement 当子元素超过最大数量时，显示一个省略占位元素，如：<p>...</p>
 */
function appendElementToLimitContainer(containerElement, subElement, maxCount, ellipsisElement) {
  var result = {};
  result.isOverflow = false;

  if (!containerElement || !subElement) {
    return result;
  }

  var conEle = containerElement;
  conEle.appendChild(subElement); //超出范围

  if (conEle._x_js_kit_limit_edge_index > 0) {
    if (!conEle._x_js_kit_limit_inserted_ellipsis) {
      conEle.insertBefore(ellipsisElement, conEle.childNodes[conEle._x_js_kit_limit_edge_index]);
      conEle._x_js_kit_limit_inserted_ellipsis = true;
    }

    conEle.removeChild(conEle.childNodes[conEle._x_js_kit_limit_edge_index + 1]);
    result.isOverflow = true;
    return result;
  } //正常范围


  var childLength = containerElement.childNodes.length;

  if (childLength == maxCount) {
    conEle._x_js_kit_limit_edge_index = Math.ceil(childLength / 2);
  }

  return result;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb21tb24vZG9tLnRzIl0sIm5hbWVzIjpbImFwcGVuZEVsZW1lbnRUb0xpbWl0Q29udGFpbmVyIiwiY29udGFpbmVyRWxlbWVudCIsInN1YkVsZW1lbnQiLCJtYXhDb3VudCIsImVsbGlwc2lzRWxlbWVudCIsInJlc3VsdCIsImlzT3ZlcmZsb3ciLCJjb25FbGUiLCJhcHBlbmRDaGlsZCIsIl94X2pzX2tpdF9saW1pdF9lZGdlX2luZGV4IiwiX3hfanNfa2l0X2xpbWl0X2luc2VydGVkX2VsbGlwc2lzIiwiaW5zZXJ0QmVmb3JlIiwiY2hpbGROb2RlcyIsInJlbW92ZUNoaWxkIiwiY2hpbGRMZW5ndGgiLCJsZW5ndGgiLCJNYXRoIiwiY2VpbCJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQU9BO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTyxTQUFTQSw2QkFBVCxDQUF1Q0MsZ0JBQXZDLEVBQXNFQyxVQUF0RSxFQUErRkMsUUFBL0YsRUFBaUhDLGVBQWpILEVBQXdMO0FBQzNMLE1BQU1DLE1BQU0sR0FBRyxFQUFmO0FBQ0FBLEVBQUFBLE1BQU0sQ0FBQ0MsVUFBUCxHQUFvQixLQUFwQjs7QUFDQSxNQUFJLENBQUNMLGdCQUFELElBQXFCLENBQUNDLFVBQTFCLEVBQXNDO0FBQ2xDLFdBQU9HLE1BQVA7QUFDSDs7QUFDRCxNQUFNRSxNQUFNLEdBQUdOLGdCQUFmO0FBWUFNLEVBQUFBLE1BQU0sQ0FBQ0MsV0FBUCxDQUFtQk4sVUFBbkIsRUFsQjJMLENBbUIzTDs7QUFDQSxNQUFJSyxNQUFNLENBQUNFLDBCQUFQLEdBQW9DLENBQXhDLEVBQTJDO0FBQ3ZDLFFBQUksQ0FBQ0YsTUFBTSxDQUFDRyxpQ0FBWixFQUErQztBQUMzQ0gsTUFBQUEsTUFBTSxDQUFDSSxZQUFQLENBQW9CUCxlQUFwQixFQUFxQ0csTUFBTSxDQUFDSyxVQUFQLENBQWtCTCxNQUFNLENBQUNFLDBCQUF6QixDQUFyQztBQUNBRixNQUFBQSxNQUFNLENBQUNHLGlDQUFQLEdBQTJDLElBQTNDO0FBQ0g7O0FBQ0RILElBQUFBLE1BQU0sQ0FBQ00sV0FBUCxDQUFtQk4sTUFBTSxDQUFDSyxVQUFQLENBQWtCTCxNQUFNLENBQUNFLDBCQUFQLEdBQW9DLENBQXRELENBQW5CO0FBQ0FKLElBQUFBLE1BQU0sQ0FBQ0MsVUFBUCxHQUFvQixJQUFwQjtBQUNBLFdBQU9ELE1BQVA7QUFDSCxHQTVCMEwsQ0E2QjNMOzs7QUFDQSxNQUFNUyxXQUFXLEdBQUdiLGdCQUFnQixDQUFDVyxVQUFqQixDQUE0QkcsTUFBaEQ7O0FBQ0EsTUFBSUQsV0FBVyxJQUFJWCxRQUFuQixFQUE2QjtBQUN6QkksSUFBQUEsTUFBTSxDQUFDRSwwQkFBUCxHQUFvQ08sSUFBSSxDQUFDQyxJQUFMLENBQVVILFdBQVcsR0FBRyxDQUF4QixDQUFwQztBQUNIOztBQUNELFNBQU9ULE1BQVA7QUFDSCIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBpbnRlcmZhY2UgQXBwZW5kRWxlbWVudFRvTGltaXRDb250YWluZXJSZXN1bHRUeXBlIHtcclxuICAgIC8qKlxyXG4gICAgICog5a2Q5YWD57Sg5piv5ZCm6LaF5Ye65pyA5aSn6IyD5Zu0XHJcbiAgICAgKi9cclxuICAgIGlzT3ZlcmZsb3c6IGJvb2xlYW5cclxufVxyXG5cclxuLyoqXHJcbiAqIOWcqOaMh+WumuWuueWZqOeahOacq+Wwvui/veWKoOS4gOS4quWtkOWFg+e0oO+8jOW5tuS4lOmZkOWItuatpOWuueWZqOWGheeahOWtkOWFg+e0oOeahOacgOWkp+aVsOmHj+OAguWmguaenOi2heWHuuacgOWkp+aVsOmHj++8jOWImeaYvuekuuS4gOS4quWNoOS9jeWFg+e0oFxyXG4gKiDlupTnlKjlnLrmma/vvJrkuIDkuKogZGl2IOmcgOimgeWunuaXtuaYvuekuuaXoOaVsOadoeaXpeW/l++8jOavj+adoeaXpeW/l+WNoOeUqOS4gOihjO+8jOW9k+aXpeW/l+i/h+WkmuaXtu+8jOmZkOWItuaYvuekuueahOaVsOmHj++8jOW5tuWxleekuuS4gOS4quOAkOabtOWkmuOAkeaMiemSruS+m+eUqOaIt+WNleWHu+afpeeci+WujOaVtOaXpeW/l1xyXG4gKiBAcGFyYW0gY29udGFpbmVyRWxlbWVudCDlpJblsYLlrrnlmahcclxuICogQHBhcmFtIHN1YkVsZW1lbnQg5a2Q5YWD57SgXHJcbiAqIEBwYXJhbSBtYXhDb3VudCDmnIDlpKflrZDlhYPntKDmlbDph49cclxuICogQHBhcmFtIGVsbGlwc2lzRWxlbWVudCDlvZPlrZDlhYPntKDotoXov4fmnIDlpKfmlbDph4/ml7bvvIzmmL7npLrkuIDkuKrnnIHnlaXljaDkvY3lhYPntKDvvIzlpoLvvJo8cD4uLi48L3A+XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gYXBwZW5kRWxlbWVudFRvTGltaXRDb250YWluZXIoY29udGFpbmVyRWxlbWVudDogSFRNTEVsZW1lbnQsIHN1YkVsZW1lbnQ6IEhUTUxFbGVtZW50LCBtYXhDb3VudDogbnVtYmVyLCBlbGxpcHNpc0VsZW1lbnQ6IEhUTUxFbGVtZW50KTogQXBwZW5kRWxlbWVudFRvTGltaXRDb250YWluZXJSZXN1bHRUeXBlIHtcclxuICAgIGNvbnN0IHJlc3VsdCA9IHt9IGFzIEFwcGVuZEVsZW1lbnRUb0xpbWl0Q29udGFpbmVyUmVzdWx0VHlwZVxyXG4gICAgcmVzdWx0LmlzT3ZlcmZsb3cgPSBmYWxzZVxyXG4gICAgaWYgKCFjb250YWluZXJFbGVtZW50IHx8ICFzdWJFbGVtZW50KSB7XHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgfVxyXG4gICAgY29uc3QgY29uRWxlID0gY29udGFpbmVyRWxlbWVudCBhcyBIVE1MRWxlbWVudCAmIHtcclxuICAgICAgICAvKipcclxuICAgICAgICAgKiDojIPlm7TovrnnlYzlhYPntKBcclxuICAgICAgICAgKi9cclxuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgY2FtZWxjYXNlXHJcbiAgICAgICAgX3hfanNfa2l0X2xpbWl0X2VkZ2VfaW5kZXg6IG51bWJlclxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOaYr+WQpuW3suaPkuWFpeecgeeVpeWNoOS9jeWFg+e0oFxyXG4gICAgICAgICAqL1xyXG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBjYW1lbGNhc2VcclxuICAgICAgICBfeF9qc19raXRfbGltaXRfaW5zZXJ0ZWRfZWxsaXBzaXM6IGJvb2xlYW5cclxuICAgIH1cclxuICAgIGNvbkVsZS5hcHBlbmRDaGlsZChzdWJFbGVtZW50KVxyXG4gICAgLy/otoXlh7rojIPlm7RcclxuICAgIGlmIChjb25FbGUuX3hfanNfa2l0X2xpbWl0X2VkZ2VfaW5kZXggPiAwKSB7XHJcbiAgICAgICAgaWYgKCFjb25FbGUuX3hfanNfa2l0X2xpbWl0X2luc2VydGVkX2VsbGlwc2lzKSB7XHJcbiAgICAgICAgICAgIGNvbkVsZS5pbnNlcnRCZWZvcmUoZWxsaXBzaXNFbGVtZW50LCBjb25FbGUuY2hpbGROb2Rlc1tjb25FbGUuX3hfanNfa2l0X2xpbWl0X2VkZ2VfaW5kZXhdKVxyXG4gICAgICAgICAgICBjb25FbGUuX3hfanNfa2l0X2xpbWl0X2luc2VydGVkX2VsbGlwc2lzID0gdHJ1ZVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25FbGUucmVtb3ZlQ2hpbGQoY29uRWxlLmNoaWxkTm9kZXNbY29uRWxlLl94X2pzX2tpdF9saW1pdF9lZGdlX2luZGV4ICsgMV0pXHJcbiAgICAgICAgcmVzdWx0LmlzT3ZlcmZsb3cgPSB0cnVlXHJcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxyXG4gICAgfVxyXG4gICAgLy/mraPluLjojIPlm7RcclxuICAgIGNvbnN0IGNoaWxkTGVuZ3RoID0gY29udGFpbmVyRWxlbWVudC5jaGlsZE5vZGVzLmxlbmd0aFxyXG4gICAgaWYgKGNoaWxkTGVuZ3RoID09IG1heENvdW50KSB7XHJcbiAgICAgICAgY29uRWxlLl94X2pzX2tpdF9saW1pdF9lZGdlX2luZGV4ID0gTWF0aC5jZWlsKGNoaWxkTGVuZ3RoIC8gMilcclxuICAgIH1cclxuICAgIHJldHVybiByZXN1bHRcclxufVxyXG4iXX0=