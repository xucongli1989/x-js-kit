"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.hasKey = hasKey;
exports.hasValue = hasValue;
exports.toParams = toParams;
exports.toObject = toObject;

var _data = require("./data");

/**
 * 是否包含名key
 * @param json json对象
 * @param keyName key名
 * @returns 判断结果
 */
function hasKey(json, keyName) {
  if (!json) {
    return false;
  }

  return Object.keys(json).includes(keyName);
}
/**
 * 是否包含值value
 * @param  json json对象
 * @param keyValue value值
 * @returns 判断结果
 */


function hasValue(json, keyValue) {
  if (!json) {
    return false;
  }

  var r = false;

  for (var k in json) {
    if (json[k] === keyValue) {
      r = true;
      break;
    }
  }

  return r;
}
/**
 * json对象转成param形式的字符串，如{a:1,b:2,c:[3,4,5]}=>"a=1&b=2&c=3&c=4&c=5"
 * @param  json 待转换的json数据源
 * @returns 转换结果
 */


function toParams(json) {
  if (!json) return "";
  var arr = [];

  for (var m in json) {
    var value = json[m];

    if ((0, _data.isNullOrUndefined)(value) || (0, _data.isString)(value) && (0, _data.isNullOrWhiteSpace)(value)) {
      continue;
    }

    var temp = "";

    if ((0, _data.isArray)(value)) {
      temp = value.join("&" + m + "=");
    } else {
      temp = value;
    }

    arr.push(m + "=" + temp);
  }

  return arr.join("&");
}
/**
 * 将json字符串转换为对象，如果转换失败，则返回null
 * @param json json字符串
 */


function toObject(json) {
  if (!json) {
    return null;
  }

  var result = null;

  try {
    //去前后空白
    json = json.trim(); //花括号对象去前后空白

    json = json.replace(/^{\s+/, "{").replace(/\s+}$/, "}"); //数组对象去前后空白

    json = json.replace(/^\[\s+/, "[").replace(/\s+]$/, "]");
    result = JSON.parse(json);
  } catch (_unused) {//
  }

  return result;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb21tb24vanNvbi50cyJdLCJuYW1lcyI6WyJoYXNLZXkiLCJqc29uIiwia2V5TmFtZSIsIk9iamVjdCIsImtleXMiLCJpbmNsdWRlcyIsImhhc1ZhbHVlIiwia2V5VmFsdWUiLCJyIiwiayIsInRvUGFyYW1zIiwiYXJyIiwibSIsInZhbHVlIiwidGVtcCIsImpvaW4iLCJwdXNoIiwidG9PYmplY3QiLCJyZXN1bHQiLCJ0cmltIiwicmVwbGFjZSIsIkpTT04iLCJwYXJzZSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7OztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPLFNBQVNBLE1BQVQsQ0FBZ0JDLElBQWhCLEVBQXVDQyxPQUF2QyxFQUF3RDtBQUMzRCxNQUFJLENBQUNELElBQUwsRUFBVztBQUNQLFdBQU8sS0FBUDtBQUNIOztBQUNELFNBQU9FLE1BQU0sQ0FBQ0MsSUFBUCxDQUFZSCxJQUFaLEVBQWtCSSxRQUFsQixDQUEyQkgsT0FBM0IsQ0FBUDtBQUNIO0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDTyxTQUFTSSxRQUFULENBQWtCTCxJQUFsQixFQUF5Q00sUUFBekMsRUFBd0Q7QUFDM0QsTUFBSSxDQUFDTixJQUFMLEVBQVc7QUFDUCxXQUFPLEtBQVA7QUFDSDs7QUFDRCxNQUFJTyxDQUFDLEdBQUcsS0FBUjs7QUFDQSxPQUFLLElBQU1DLENBQVgsSUFBZ0JSLElBQWhCLEVBQXNCO0FBQ2xCLFFBQUlBLElBQUksQ0FBQ1EsQ0FBRCxDQUFKLEtBQVlGLFFBQWhCLEVBQTBCO0FBQ3RCQyxNQUFBQSxDQUFDLEdBQUcsSUFBSjtBQUNBO0FBQ0g7QUFDSjs7QUFDRCxTQUFPQSxDQUFQO0FBQ0g7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUFDTyxTQUFTRSxRQUFULENBQWtCVCxJQUFsQixFQUF5QztBQUM1QyxNQUFJLENBQUNBLElBQUwsRUFBVyxPQUFPLEVBQVA7QUFDWCxNQUFNVSxHQUFHLEdBQUcsRUFBWjs7QUFDQSxPQUFLLElBQU1DLENBQVgsSUFBZ0JYLElBQWhCLEVBQXNCO0FBQ2xCLFFBQU1ZLEtBQUssR0FBR1osSUFBSSxDQUFDVyxDQUFELENBQWxCOztBQUNBLFFBQUksNkJBQWtCQyxLQUFsQixLQUE2QixvQkFBU0EsS0FBVCxLQUFtQiw4QkFBbUJBLEtBQW5CLENBQXBELEVBQWdGO0FBQzVFO0FBQ0g7O0FBQ0QsUUFBSUMsSUFBSSxHQUFHLEVBQVg7O0FBQ0EsUUFBSSxtQkFBUUQsS0FBUixDQUFKLEVBQW9CO0FBQ2hCQyxNQUFBQSxJQUFJLEdBQUdELEtBQUssQ0FBQ0UsSUFBTixDQUFXLE1BQU1ILENBQU4sR0FBVSxHQUFyQixDQUFQO0FBQ0gsS0FGRCxNQUVPO0FBQ0hFLE1BQUFBLElBQUksR0FBR0QsS0FBUDtBQUNIOztBQUNERixJQUFBQSxHQUFHLENBQUNLLElBQUosQ0FBU0osQ0FBQyxHQUFHLEdBQUosR0FBVUUsSUFBbkI7QUFDSDs7QUFDRCxTQUFPSCxHQUFHLENBQUNJLElBQUosQ0FBUyxHQUFULENBQVA7QUFDSDtBQUVEO0FBQ0E7QUFDQTtBQUNBOzs7QUFDTyxTQUFTRSxRQUFULENBQXFCaEIsSUFBckIsRUFBNkM7QUFDaEQsTUFBSSxDQUFDQSxJQUFMLEVBQVc7QUFDUCxXQUFPLElBQVA7QUFDSDs7QUFDRCxNQUFJaUIsTUFBZ0IsR0FBRyxJQUF2Qjs7QUFDQSxNQUFJO0FBQ0E7QUFDQWpCLElBQUFBLElBQUksR0FBR0EsSUFBSSxDQUFDa0IsSUFBTCxFQUFQLENBRkEsQ0FHQTs7QUFDQWxCLElBQUFBLElBQUksR0FBR0EsSUFBSSxDQUFDbUIsT0FBTCxDQUFhLE9BQWIsRUFBc0IsR0FBdEIsRUFBMkJBLE9BQTNCLENBQW1DLE9BQW5DLEVBQTRDLEdBQTVDLENBQVAsQ0FKQSxDQUtBOztBQUNBbkIsSUFBQUEsSUFBSSxHQUFHQSxJQUFJLENBQUNtQixPQUFMLENBQWEsUUFBYixFQUF1QixHQUF2QixFQUE0QkEsT0FBNUIsQ0FBb0MsT0FBcEMsRUFBNkMsR0FBN0MsQ0FBUDtBQUNBRixJQUFBQSxNQUFNLEdBQUdHLElBQUksQ0FBQ0MsS0FBTCxDQUFXckIsSUFBWCxDQUFUO0FBQ0gsR0FSRCxDQVFFLGdCQUFNLENBQ0o7QUFDSDs7QUFDRCxTQUFPaUIsTUFBUDtBQUNIIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQW55S2V5VmFsdWVUeXBlIH0gZnJvbSBcIi4uL2RlY2xhcmF0aW9uL2NvbW1vblwiXHJcbmltcG9ydCB7IGlzQXJyYXksIGlzTnVsbE9yVW5kZWZpbmVkLCBpc051bGxPcldoaXRlU3BhY2UsIGlzU3RyaW5nIH0gZnJvbSBcIi4vZGF0YVwiXHJcblxyXG4vKipcclxuICog5piv5ZCm5YyF5ZCr5ZCNa2V5XHJcbiAqIEBwYXJhbSBqc29uIGpzb27lr7nosaFcclxuICogQHBhcmFtIGtleU5hbWUga2V55ZCNXHJcbiAqIEByZXR1cm5zIOWIpOaWree7k+aenFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGhhc0tleShqc29uOiBBbnlLZXlWYWx1ZVR5cGUsIGtleU5hbWU6IHN0cmluZykge1xyXG4gICAgaWYgKCFqc29uKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICB9XHJcbiAgICByZXR1cm4gT2JqZWN0LmtleXMoanNvbikuaW5jbHVkZXMoa2V5TmFtZSlcclxufVxyXG5cclxuLyoqXHJcbiAqIOaYr+WQpuWMheWQq+WAvHZhbHVlXHJcbiAqIEBwYXJhbSAganNvbiBqc29u5a+56LGhXHJcbiAqIEBwYXJhbSBrZXlWYWx1ZSB2YWx1ZeWAvFxyXG4gKiBAcmV0dXJucyDliKTmlq3nu5PmnpxcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBoYXNWYWx1ZShqc29uOiBBbnlLZXlWYWx1ZVR5cGUsIGtleVZhbHVlOiBhbnkpIHtcclxuICAgIGlmICghanNvbikge1xyXG4gICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG4gICAgbGV0IHIgPSBmYWxzZVxyXG4gICAgZm9yIChjb25zdCBrIGluIGpzb24pIHtcclxuICAgICAgICBpZiAoanNvbltrXSA9PT0ga2V5VmFsdWUpIHtcclxuICAgICAgICAgICAgciA9IHRydWVcclxuICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gclxyXG59XHJcblxyXG4vKipcclxuICoganNvbuWvueixoei9rOaIkHBhcmFt5b2i5byP55qE5a2X56ym5Liy77yM5aaCe2E6MSxiOjIsYzpbMyw0LDVdfT0+XCJhPTEmYj0yJmM9MyZjPTQmYz01XCJcclxuICogQHBhcmFtICBqc29uIOW+hei9rOaNoueahGpzb27mlbDmja7mupBcclxuICogQHJldHVybnMg6L2s5o2i57uT5p6cXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gdG9QYXJhbXMoanNvbjogQW55S2V5VmFsdWVUeXBlKSB7XHJcbiAgICBpZiAoIWpzb24pIHJldHVybiBcIlwiXHJcbiAgICBjb25zdCBhcnIgPSBbXVxyXG4gICAgZm9yIChjb25zdCBtIGluIGpzb24pIHtcclxuICAgICAgICBjb25zdCB2YWx1ZSA9IGpzb25bbV1cclxuICAgICAgICBpZiAoaXNOdWxsT3JVbmRlZmluZWQodmFsdWUpIHx8IChpc1N0cmluZyh2YWx1ZSkgJiYgaXNOdWxsT3JXaGl0ZVNwYWNlKHZhbHVlKSkpIHtcclxuICAgICAgICAgICAgY29udGludWVcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IHRlbXAgPSBcIlwiXHJcbiAgICAgICAgaWYgKGlzQXJyYXkodmFsdWUpKSB7XHJcbiAgICAgICAgICAgIHRlbXAgPSB2YWx1ZS5qb2luKFwiJlwiICsgbSArIFwiPVwiKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRlbXAgPSB2YWx1ZVxyXG4gICAgICAgIH1cclxuICAgICAgICBhcnIucHVzaChtICsgXCI9XCIgKyB0ZW1wKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGFyci5qb2luKFwiJlwiKVxyXG59XHJcblxyXG4vKipcclxuICog5bCGanNvbuWtl+espuS4sui9rOaNouS4uuWvueixoe+8jOWmguaenOi9rOaNouWksei0pe+8jOWImei/lOWbnm51bGxcclxuICogQHBhcmFtIGpzb24ganNvbuWtl+espuS4slxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHRvT2JqZWN0PFQ+KGpzb246IHN0cmluZyk6IFQgfCBudWxsIHtcclxuICAgIGlmICghanNvbikge1xyXG4gICAgICAgIHJldHVybiBudWxsXHJcbiAgICB9XHJcbiAgICBsZXQgcmVzdWx0OiBUIHwgbnVsbCA9IG51bGxcclxuICAgIHRyeSB7XHJcbiAgICAgICAgLy/ljrvliY3lkI7nqbrnmb1cclxuICAgICAgICBqc29uID0ganNvbi50cmltKClcclxuICAgICAgICAvL+iKseaLrOWPt+WvueixoeWOu+WJjeWQjuepuueZvVxyXG4gICAgICAgIGpzb24gPSBqc29uLnJlcGxhY2UoL157XFxzKy8sIFwie1wiKS5yZXBsYWNlKC9cXHMrfSQvLCBcIn1cIilcclxuICAgICAgICAvL+aVsOe7hOWvueixoeWOu+WJjeWQjuepuueZvVxyXG4gICAgICAgIGpzb24gPSBqc29uLnJlcGxhY2UoL15cXFtcXHMrLywgXCJbXCIpLnJlcGxhY2UoL1xccytdJC8sIFwiXVwiKVxyXG4gICAgICAgIHJlc3VsdCA9IEpTT04ucGFyc2UoanNvbilcclxuICAgIH0gY2F0Y2gge1xyXG4gICAgICAgIC8vXHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzdWx0XHJcbn1cclxuIl19