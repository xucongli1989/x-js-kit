"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.convertEnumToList = convertEnumToList;
exports.toEnum = toEnum;
exports.isValueInEnum = isValueInEnum;

var _data = require("./data");

/**
 * 将枚举转换为KeyValue列表
 */
function convertEnumToList(em) {
  var lst = [];

  for (var key in em) {
    if (!isNaN(Number(key))) {
      continue;
    }

    var item = {};
    item.key = key;
    item.value = em[key];
    lst.push(item);
  }

  return lst;
}
/**
 *  将字符串或数字转换为枚举，若转换失败则取枚举的第一项或取自定义的默认枚举
 */


function toEnum(em, value, defaultValue) {
  var lst = convertEnumToList(em);

  if (!(0, _data.isNullOrUndefined)(value)) {
    var m = lst.find(function (k) {
      return k.value == value;
    });

    if (m) {
      return em[m.key];
    }
  }

  if (!(0, _data.isNullOrUndefined)(defaultValue)) {
    return defaultValue;
  }

  return em[lst[0].key];
}
/**
 * 判断一个值是否属于指定的枚举
 */


function isValueInEnum(em, value) {
  if ((0, _data.isNullOrUndefined)(value)) {
    return false;
  }

  return !!convertEnumToList(em).find(function (k) {
    return k.value == value;
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb21tb24vZW51bVRvb2wudHMiXSwibmFtZXMiOlsiY29udmVydEVudW1Ub0xpc3QiLCJlbSIsImxzdCIsImtleSIsImlzTmFOIiwiTnVtYmVyIiwiaXRlbSIsInZhbHVlIiwicHVzaCIsInRvRW51bSIsImRlZmF1bHRWYWx1ZSIsIm0iLCJmaW5kIiwiayIsImlzVmFsdWVJbkVudW0iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNPLFNBQVNBLGlCQUFULENBQThCQyxFQUE5QixFQUE4RDtBQUNqRSxNQUFNQyxHQUFHLEdBQUcsRUFBWjs7QUFDQSxPQUFLLElBQU1DLEdBQVgsSUFBa0JGLEVBQWxCLEVBQXNCO0FBQ2xCLFFBQUksQ0FBQ0csS0FBSyxDQUFDQyxNQUFNLENBQUNGLEdBQUQsQ0FBUCxDQUFWLEVBQXlCO0FBQ3JCO0FBQ0g7O0FBQ0QsUUFBTUcsSUFBSSxHQUFHLEVBQWI7QUFDQUEsSUFBQUEsSUFBSSxDQUFDSCxHQUFMLEdBQVdBLEdBQVg7QUFDQUcsSUFBQUEsSUFBSSxDQUFDQyxLQUFMLEdBQWFOLEVBQUUsQ0FBQ0UsR0FBRCxDQUFmO0FBQ0FELElBQUFBLEdBQUcsQ0FBQ00sSUFBSixDQUFTRixJQUFUO0FBQ0g7O0FBQ0QsU0FBT0osR0FBUDtBQUNIO0FBRUQ7QUFDQTtBQUNBOzs7QUFDTyxTQUFTTyxNQUFULENBQW1CUixFQUFuQixFQUEwQk0sS0FBMUIsRUFBa0RHLFlBQWxELEVBQXlGO0FBQzVGLE1BQU1SLEdBQUcsR0FBR0YsaUJBQWlCLENBQUNDLEVBQUQsQ0FBN0I7O0FBQ0EsTUFBSSxDQUFDLDZCQUFrQk0sS0FBbEIsQ0FBTCxFQUErQjtBQUMzQixRQUFNSSxDQUFDLEdBQUdULEdBQUcsQ0FBQ1UsSUFBSixDQUFTLFVBQUNDLENBQUQ7QUFBQSxhQUFPQSxDQUFDLENBQUNOLEtBQUYsSUFBV0EsS0FBbEI7QUFBQSxLQUFULENBQVY7O0FBQ0EsUUFBSUksQ0FBSixFQUFPO0FBQ0gsYUFBUVYsRUFBRCxDQUFZVSxDQUFDLENBQUNSLEdBQWQsQ0FBUDtBQUNIO0FBQ0o7O0FBQ0QsTUFBSSxDQUFDLDZCQUFrQk8sWUFBbEIsQ0FBTCxFQUFzQztBQUNsQyxXQUFPQSxZQUFQO0FBQ0g7O0FBQ0QsU0FBUVQsRUFBRCxDQUFZQyxHQUFHLENBQUMsQ0FBRCxDQUFILENBQU9DLEdBQW5CLENBQVA7QUFDSDtBQUVEO0FBQ0E7QUFDQTs7O0FBQ08sU0FBU1csYUFBVCxDQUEwQmIsRUFBMUIsRUFBaUNNLEtBQWpDLEVBQWtFO0FBQ3JFLE1BQUksNkJBQWtCQSxLQUFsQixDQUFKLEVBQThCO0FBQzFCLFdBQU8sS0FBUDtBQUNIOztBQUNELFNBQU8sQ0FBQyxDQUFDUCxpQkFBaUIsQ0FBQ0MsRUFBRCxDQUFqQixDQUFzQlcsSUFBdEIsQ0FBMkIsVUFBQ0MsQ0FBRDtBQUFBLFdBQU9BLENBQUMsQ0FBQ04sS0FBRixJQUFXQSxLQUFsQjtBQUFBLEdBQTNCLENBQVQ7QUFDSCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEtleVZhbHVlIH0gZnJvbSBcIi4uL2VudGl0eS9rZXlWYWx1ZVwiXHJcbmltcG9ydCB7IGlzTnVsbE9yVW5kZWZpbmVkIH0gZnJvbSBcIi4vZGF0YVwiXHJcblxyXG4vKipcclxuICog5bCG5p6a5Li+6L2s5o2i5Li6S2V5VmFsdWXliJfooahcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0RW51bVRvTGlzdDxUPihlbTogVCk6IEtleVZhbHVlPHN0cmluZywgYW55PltdIHtcclxuICAgIGNvbnN0IGxzdCA9IFtdIGFzIEtleVZhbHVlPHN0cmluZywgYW55PltdXHJcbiAgICBmb3IgKGNvbnN0IGtleSBpbiBlbSkge1xyXG4gICAgICAgIGlmICghaXNOYU4oTnVtYmVyKGtleSkpKSB7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNvbnN0IGl0ZW0gPSB7fSBhcyBLZXlWYWx1ZTxzdHJpbmcsIGFueT5cclxuICAgICAgICBpdGVtLmtleSA9IGtleVxyXG4gICAgICAgIGl0ZW0udmFsdWUgPSBlbVtrZXldIGFzIGFueVxyXG4gICAgICAgIGxzdC5wdXNoKGl0ZW0pXHJcbiAgICB9XHJcbiAgICByZXR1cm4gbHN0XHJcbn1cclxuXHJcbi8qKlxyXG4gKiAg5bCG5a2X56ym5Liy5oiW5pWw5a2X6L2s5o2i5Li65p6a5Li+77yM6Iul6L2s5o2i5aSx6LSl5YiZ5Y+W5p6a5Li+55qE56ys5LiA6aG55oiW5Y+W6Ieq5a6a5LmJ55qE6buY6K6k5p6a5Li+XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gdG9FbnVtPFQ+KGVtOiBULCB2YWx1ZTogc3RyaW5nIHwgbnVtYmVyLCBkZWZhdWx0VmFsdWU/OiBUW2tleW9mIFRdKTogVFtrZXlvZiBUXSB7XHJcbiAgICBjb25zdCBsc3QgPSBjb252ZXJ0RW51bVRvTGlzdChlbSlcclxuICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQodmFsdWUpKSB7XHJcbiAgICAgICAgY29uc3QgbSA9IGxzdC5maW5kKChrKSA9PiBrLnZhbHVlID09IHZhbHVlKVxyXG4gICAgICAgIGlmIChtKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAoZW0gYXMgYW55KVttLmtleV1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAoIWlzTnVsbE9yVW5kZWZpbmVkKGRlZmF1bHRWYWx1ZSkpIHtcclxuICAgICAgICByZXR1cm4gZGVmYXVsdFZhbHVlIGFzIFRba2V5b2YgVF1cclxuICAgIH1cclxuICAgIHJldHVybiAoZW0gYXMgYW55KVtsc3RbMF0ua2V5XVxyXG59XHJcblxyXG4vKipcclxuICog5Yik5pat5LiA5Liq5YC85piv5ZCm5bGe5LqO5oyH5a6a55qE5p6a5Li+XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNWYWx1ZUluRW51bTxUPihlbTogVCwgdmFsdWU6IHN0cmluZyB8IG51bWJlcik6IGJvb2xlYW4ge1xyXG4gICAgaWYgKGlzTnVsbE9yVW5kZWZpbmVkKHZhbHVlKSkge1xyXG4gICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG4gICAgcmV0dXJuICEhY29udmVydEVudW1Ub0xpc3QoZW0pLmZpbmQoKGspID0+IGsudmFsdWUgPT0gdmFsdWUpXHJcbn1cclxuIl19