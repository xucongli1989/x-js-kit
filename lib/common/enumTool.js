"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.convertEnumToList = convertEnumToList;
exports.toEnum = toEnum;
exports.isValueInEnum = isValueInEnum;

var _data = require("./data");

/**
 * 将枚举转换为KeyValue列表
 */
function convertEnumToList(em) {
  var lst = [];

  for (var key in em) {
    if (!isNaN(Number(key))) {
      continue;
    }

    var item = {};
    item.key = key;
    item.value = em[key];
    lst.push(item);
  }

  return lst;
}
/**
 *  将字符串或数字转换为枚举，若转换失败则取枚举的第一项或取自定义的默认枚举
 */


function toEnum(em, value, defaultValue) {
  var lst = convertEnumToList(em);

  if (!(0, _data.isNullOrUndefined)(value)) {
    var m = lst.find(function (k) {
      return k.value == value;
    });

    if (m) {
      return em[m.key];
    }
  }

  if (!(0, _data.isNullOrUndefined)(defaultValue)) {
    return defaultValue;
  }

  return em[lst[0].key];
}
/**
 * 判断一个值是否属于指定的枚举
 */


function isValueInEnum(em, value) {
  if ((0, _data.isNullOrUndefined)(value)) {
    return false;
  }

  return !!convertEnumToList(em).find(function (k) {
    return k.value == value;
  });
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9jb21tb24vZW51bVRvb2wudHMiXSwibmFtZXMiOlsiY29udmVydEVudW1Ub0xpc3QiLCJlbSIsImxzdCIsImtleSIsImlzTmFOIiwiTnVtYmVyIiwiaXRlbSIsInZhbHVlIiwicHVzaCIsInRvRW51bSIsImRlZmF1bHRWYWx1ZSIsIm0iLCJmaW5kIiwiayIsImlzVmFsdWVJbkVudW0iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OztBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNPLFNBQVNBLGlCQUFULENBQThCQyxFQUE5QixFQUFpRDtBQUNwRCxNQUFNQyxHQUFHLEdBQUcsRUFBWjs7QUFDQSxPQUFLLElBQU1DLEdBQVgsSUFBa0JGLEVBQWxCLEVBQXNCO0FBQ2xCLFFBQUksQ0FBQ0csS0FBSyxDQUFDQyxNQUFNLENBQUNGLEdBQUQsQ0FBUCxDQUFWLEVBQXlCO0FBQ3JCO0FBQ0g7O0FBQ0QsUUFBTUcsSUFBSSxHQUFHLEVBQWI7QUFDQUEsSUFBQUEsSUFBSSxDQUFDSCxHQUFMLEdBQVdBLEdBQVg7QUFDQUcsSUFBQUEsSUFBSSxDQUFDQyxLQUFMLEdBQWFOLEVBQUUsQ0FBQ0UsR0FBRCxDQUFmO0FBQ0FELElBQUFBLEdBQUcsQ0FBQ00sSUFBSixDQUFTRixJQUFUO0FBQ0g7O0FBQ0QsU0FBT0osR0FBUDtBQUNIO0FBRUQ7QUFDQTtBQUNBOzs7QUFDTyxTQUFTTyxNQUFULENBQW1CUixFQUFuQixFQUEwQk0sS0FBMUIsRUFBa0RHLFlBQWxELEVBQXlGO0FBQzVGLE1BQU1SLEdBQUcsR0FBR0YsaUJBQWlCLENBQUNDLEVBQUQsQ0FBN0I7O0FBQ0EsTUFBSSxDQUFDLDZCQUFrQk0sS0FBbEIsQ0FBTCxFQUErQjtBQUMzQixRQUFNSSxDQUFDLEdBQUdULEdBQUcsQ0FBQ1UsSUFBSixDQUFTLFVBQUNDLENBQUQ7QUFBQSxhQUFPQSxDQUFDLENBQUNOLEtBQUYsSUFBV0EsS0FBbEI7QUFBQSxLQUFULENBQVY7O0FBQ0EsUUFBSUksQ0FBSixFQUFPO0FBQ0gsYUFBUVYsRUFBRCxDQUFZVSxDQUFDLENBQUNSLEdBQWQsQ0FBUDtBQUNIO0FBQ0o7O0FBQ0QsTUFBSSxDQUFDLDZCQUFrQk8sWUFBbEIsQ0FBTCxFQUFzQztBQUNsQyxXQUFPQSxZQUFQO0FBQ0g7O0FBQ0QsU0FBUVQsRUFBRCxDQUFZQyxHQUFHLENBQUMsQ0FBRCxDQUFILENBQU9DLEdBQW5CLENBQVA7QUFDSDtBQUVEO0FBQ0E7QUFDQTs7O0FBQ08sU0FBU1csYUFBVCxDQUEwQmIsRUFBMUIsRUFBaUNNLEtBQWpDLEVBQWtFO0FBQ3JFLE1BQUksNkJBQWtCQSxLQUFsQixDQUFKLEVBQThCO0FBQzFCLFdBQU8sS0FBUDtBQUNIOztBQUNELFNBQU8sQ0FBQyxDQUFDUCxpQkFBaUIsQ0FBQ0MsRUFBRCxDQUFqQixDQUFzQlcsSUFBdEIsQ0FBMkIsVUFBQ0MsQ0FBRDtBQUFBLFdBQU9BLENBQUMsQ0FBQ04sS0FBRixJQUFXQSxLQUFsQjtBQUFBLEdBQTNCLENBQVQ7QUFDSCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEtleVZhbHVlIH0gZnJvbSBcIi4uL2VudGl0eS9rZXlWYWx1ZVwiXHJcbmltcG9ydCB7IGlzTnVsbE9yVW5kZWZpbmVkIH0gZnJvbSBcIi4vZGF0YVwiXHJcblxyXG4vKipcclxuICog5bCG5p6a5Li+6L2s5o2i5Li6S2V5VmFsdWXliJfooahcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjb252ZXJ0RW51bVRvTGlzdDxUPihlbTogVCk6IEtleVZhbHVlW10ge1xyXG4gICAgY29uc3QgbHN0ID0gW10gYXMgS2V5VmFsdWVbXVxyXG4gICAgZm9yIChjb25zdCBrZXkgaW4gZW0pIHtcclxuICAgICAgICBpZiAoIWlzTmFOKE51bWJlcihrZXkpKSkge1xyXG4gICAgICAgICAgICBjb250aW51ZVxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBpdGVtID0ge30gYXMgS2V5VmFsdWVcclxuICAgICAgICBpdGVtLmtleSA9IGtleVxyXG4gICAgICAgIGl0ZW0udmFsdWUgPSBlbVtrZXldXHJcbiAgICAgICAgbHN0LnB1c2goaXRlbSlcclxuICAgIH1cclxuICAgIHJldHVybiBsc3RcclxufVxyXG5cclxuLyoqXHJcbiAqICDlsIblrZfnrKbkuLLmiJbmlbDlrZfovazmjaLkuLrmnprkuL7vvIzoi6XovazmjaLlpLHotKXliJnlj5bmnprkuL7nmoTnrKzkuIDpobnmiJblj5boh6rlrprkuYnnmoTpu5jorqTmnprkuL5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiB0b0VudW08VD4oZW06IFQsIHZhbHVlOiBzdHJpbmcgfCBudW1iZXIsIGRlZmF1bHRWYWx1ZT86IFRba2V5b2YgVF0pOiBUW2tleW9mIFRdIHtcclxuICAgIGNvbnN0IGxzdCA9IGNvbnZlcnRFbnVtVG9MaXN0KGVtKVxyXG4gICAgaWYgKCFpc051bGxPclVuZGVmaW5lZCh2YWx1ZSkpIHtcclxuICAgICAgICBjb25zdCBtID0gbHN0LmZpbmQoKGspID0+IGsudmFsdWUgPT0gdmFsdWUpXHJcbiAgICAgICAgaWYgKG0pIHtcclxuICAgICAgICAgICAgcmV0dXJuIChlbSBhcyBhbnkpW20ua2V5XVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGlmICghaXNOdWxsT3JVbmRlZmluZWQoZGVmYXVsdFZhbHVlKSkge1xyXG4gICAgICAgIHJldHVybiBkZWZhdWx0VmFsdWUgYXMgVFtrZXlvZiBUXVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIChlbSBhcyBhbnkpW2xzdFswXS5rZXldXHJcbn1cclxuXHJcbi8qKlxyXG4gKiDliKTmlq3kuIDkuKrlgLzmmK/lkKblsZ7kuo7mjIflrprnmoTmnprkuL5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1ZhbHVlSW5FbnVtPFQ+KGVtOiBULCB2YWx1ZTogc3RyaW5nIHwgbnVtYmVyKTogYm9vbGVhbiB7XHJcbiAgICBpZiAoaXNOdWxsT3JVbmRlZmluZWQodmFsdWUpKSB7XHJcbiAgICAgICAgcmV0dXJuIGZhbHNlXHJcbiAgICB9XHJcbiAgICByZXR1cm4gISFjb252ZXJ0RW51bVRvTGlzdChlbSkuZmluZCgoaykgPT4gay52YWx1ZSA9PSB2YWx1ZSlcclxufVxyXG4iXX0=