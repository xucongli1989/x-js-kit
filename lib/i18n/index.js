"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.getDefaultLanguage = getDefaultLanguage;
exports.getDefaultCurrencySymbol = getDefaultCurrencySymbol;
exports.getLanguageNodeData = getLanguageNodeData;
exports.createOrInitI18nInstance = createOrInitI18nInstance;
exports.getXJsKitI18nInstance = getXJsKitI18nInstance;
exports.LanguageTypeEnumList = exports.LanguageTypeEnum = void 0;

var _i18next = _interopRequireDefault(require("i18next"));

var _enumTool = require("../common/enumTool");

var _data = require("../common/data");

var _lib = require("../common/lib");

var _data2 = require("./data");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var LanguageTypeEnum;
exports.LanguageTypeEnum = LanguageTypeEnum;

(function (LanguageTypeEnum) {
  LanguageTypeEnum["\u7B80\u4F53\u4E2D\u6587"] = "zh-CN";
  LanguageTypeEnum["\u7E41\u9AD4\u4E2D\u6587"] = "zh-TW";
  LanguageTypeEnum["English"] = "en-US";
  LanguageTypeEnum["Fran\xE7ais"] = "fr-FR";
  LanguageTypeEnum["Deutsch"] = "de-DE";
  LanguageTypeEnum["Espa\xF1ol"] = "es-ES";
  LanguageTypeEnum["\u65E5\u672C\u8A9E"] = "ja-JP";
  LanguageTypeEnum["\uD55C\uAD6D\uC5B4"] = "ko-KR";
})(LanguageTypeEnum || (exports.LanguageTypeEnum = LanguageTypeEnum = {}));

var LanguageTypeEnumList = (0, _enumTool.convertEnumToList)(LanguageTypeEnum);
/**
 * 获取默认语言
 */

exports.LanguageTypeEnumList = LanguageTypeEnumList;

function getDefaultLanguage(isChina) {
  return isChina ? LanguageTypeEnum.简体中文 : LanguageTypeEnum.English;
}
/**
 * 获取默认的货币符号
 */


function getDefaultCurrencySymbol(isChina) {
  return isChina ? "¥" : "$";
}
/**
 * 获取指定对象中的某个语言节点中的数据。
 * 如果 data 是字符串，则直接返回该字符串；如果是 object，则返回 object[当前语言] ；如果 object[当前语言] 没有值，则返回 object[默认语言]
 */


function getLanguageNodeData(data, isChina, lang) {
  if (!data) {
    return null;
  } //如果是字符串，则直接返回原数据即可


  if ((0, _data.isString)(data)) {
    return data;
  }

  return data[lang] || data[getDefaultLanguage(isChina)];
}
/**
 * 创建或初始化 i18n 实例。注意：defaultInstance、initReact 必须作为参数由具体使用的项目传过来，因为每个项目的默认实例不一样
 */


function createOrInitI18nInstance(isCreateNewInstance, defaultInstance, initReact, isChina, lang, transData) {
  var defaultLang = getDefaultLanguage(isChina);
  var currentLang = lang && (0, _enumTool.isValueInEnum)(LanguageTypeEnum, lang) ? lang : defaultLang;
  var initOps = {
    lng: currentLang,
    supportedLngs: LanguageTypeEnumList.map(function (k) {
      return k.value;
    }),
    fallbackLng: defaultLang,
    interpolation: {
      escapeValue: false
    },
    resources: transData
  };
  var instance = isCreateNewInstance ? defaultInstance.createInstance() : defaultInstance;
  var ins = initReact ? instance.use(initReact) : instance; //初始化实例

  ins.init(initOps, function (err) {
    if (!err) {
      return;
    }

    console.error("Init default i18n instance error: ".concat(err));
  });
  return instance;
}
/**
 * 获取当前组件库的 i18n 实例。这里会将 i18n 实例挂载到全局变量上，供不同组件跨模块访问。为什么要这样做？因为这个组件库中的每一个组件最终是分别 build 成一个独立的包，组件与组件是隔离的，并没有数据共享机制，如果不这样做，那么每个打包后的组件都有自己的 i18n 实例。
 */


function getXJsKitI18nInstance() {
  var globalObj = (0, _lib.getGlobalObject)();

  if (globalObj.___xJsKitI18nInstance) {
    return globalObj.___xJsKitI18nInstance;
  }

  globalObj.___xJsKitI18nInstance = createOrInitI18nInstance(true, _i18next.default, null, true, getDefaultLanguage(true), _data2.XJsKitI18nResourcesData);
  return globalObj.___xJsKitI18nInstance;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9pMThuL2luZGV4LnRzIl0sIm5hbWVzIjpbIkxhbmd1YWdlVHlwZUVudW0iLCJMYW5ndWFnZVR5cGVFbnVtTGlzdCIsImdldERlZmF1bHRMYW5ndWFnZSIsImlzQ2hpbmEiLCLnroDkvZPkuK3mlociLCJFbmdsaXNoIiwiZ2V0RGVmYXVsdEN1cnJlbmN5U3ltYm9sIiwiZ2V0TGFuZ3VhZ2VOb2RlRGF0YSIsImRhdGEiLCJsYW5nIiwiY3JlYXRlT3JJbml0STE4bkluc3RhbmNlIiwiaXNDcmVhdGVOZXdJbnN0YW5jZSIsImRlZmF1bHRJbnN0YW5jZSIsImluaXRSZWFjdCIsInRyYW5zRGF0YSIsImRlZmF1bHRMYW5nIiwiY3VycmVudExhbmciLCJpbml0T3BzIiwibG5nIiwic3VwcG9ydGVkTG5ncyIsIm1hcCIsImsiLCJ2YWx1ZSIsImZhbGxiYWNrTG5nIiwiaW50ZXJwb2xhdGlvbiIsImVzY2FwZVZhbHVlIiwicmVzb3VyY2VzIiwiaW5zdGFuY2UiLCJjcmVhdGVJbnN0YW5jZSIsImlucyIsInVzZSIsImluaXQiLCJlcnIiLCJjb25zb2xlIiwiZXJyb3IiLCJnZXRYSnNLaXRJMThuSW5zdGFuY2UiLCJnbG9iYWxPYmoiLCJfX194SnNLaXRJMThuSW5zdGFuY2UiLCJpMThuZXh0IiwiWEpzS2l0STE4blJlc291cmNlc0RhdGEiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztBQUFBOztBQUNBOztBQUNBOztBQUNBOztBQUNBOzs7O0lBRVlBLGdCOzs7V0FBQUEsZ0I7QUFBQUEsRUFBQUEsZ0I7QUFBQUEsRUFBQUEsZ0I7QUFBQUEsRUFBQUEsZ0I7QUFBQUEsRUFBQUEsZ0I7QUFBQUEsRUFBQUEsZ0I7QUFBQUEsRUFBQUEsZ0I7QUFBQUEsRUFBQUEsZ0I7QUFBQUEsRUFBQUEsZ0I7R0FBQUEsZ0IsZ0NBQUFBLGdCOztBQVVMLElBQU1DLG9CQUFvQixHQUFHLGlDQUFrQkQsZ0JBQWxCLENBQTdCO0FBRVA7QUFDQTtBQUNBOzs7O0FBQ08sU0FBU0Usa0JBQVQsQ0FBNEJDLE9BQTVCLEVBQThDO0FBQ2pELFNBQU9BLE9BQU8sR0FBR0gsZ0JBQWdCLENBQUNJLElBQXBCLEdBQTJCSixnQkFBZ0IsQ0FBQ0ssT0FBMUQ7QUFDSDtBQUVEO0FBQ0E7QUFDQTs7O0FBQ08sU0FBU0Msd0JBQVQsQ0FBa0NILE9BQWxDLEVBQW9EO0FBQ3ZELFNBQU9BLE9BQU8sR0FBRyxHQUFILEdBQVMsR0FBdkI7QUFDSDtBQUVEO0FBQ0E7QUFDQTtBQUNBOzs7QUFDTyxTQUFTSSxtQkFBVCxDQUFnQ0MsSUFBaEMsRUFBNEVMLE9BQTVFLEVBQThGTSxJQUE5RixFQUFzSDtBQUN6SCxNQUFJLENBQUNELElBQUwsRUFBVztBQUNQLFdBQU8sSUFBUDtBQUNILEdBSHdILENBSXpIOzs7QUFDQSxNQUFJLG9CQUFTQSxJQUFULENBQUosRUFBb0I7QUFDaEIsV0FBT0EsSUFBUDtBQUNIOztBQUNELFNBQVFBLElBQUQsQ0FBc0NDLElBQXRDLEtBQWdERCxJQUFELENBQXNDTixrQkFBa0IsQ0FBQ0MsT0FBRCxDQUF4RCxDQUF0RDtBQUNIO0FBRUQ7QUFDQTtBQUNBOzs7QUFDTyxTQUFTTyx3QkFBVCxDQUFrQ0MsbUJBQWxDLEVBQWdFQyxlQUFoRSxFQUF1RkMsU0FBdkYsRUFBb0hWLE9BQXBILEVBQXNJTSxJQUF0SSxFQUE4SkssU0FBOUosRUFBbUw7QUFDdEwsTUFBTUMsV0FBVyxHQUFHYixrQkFBa0IsQ0FBQ0MsT0FBRCxDQUF0QztBQUNBLE1BQU1hLFdBQVcsR0FBR1AsSUFBSSxJQUFJLDZCQUFjVCxnQkFBZCxFQUFnQ1MsSUFBaEMsQ0FBUixHQUFnREEsSUFBaEQsR0FBdURNLFdBQTNFO0FBRUEsTUFBTUUsT0FBb0IsR0FBRztBQUN6QkMsSUFBQUEsR0FBRyxFQUFFRixXQURvQjtBQUV6QkcsSUFBQUEsYUFBYSxFQUFFbEIsb0JBQW9CLENBQUNtQixHQUFyQixDQUF5QixVQUFDQyxDQUFEO0FBQUEsYUFBT0EsQ0FBQyxDQUFDQyxLQUFUO0FBQUEsS0FBekIsQ0FGVTtBQUd6QkMsSUFBQUEsV0FBVyxFQUFFUixXQUhZO0FBSXpCUyxJQUFBQSxhQUFhLEVBQUU7QUFDWEMsTUFBQUEsV0FBVyxFQUFFO0FBREYsS0FKVTtBQU96QkMsSUFBQUEsU0FBUyxFQUFFWjtBQVBjLEdBQTdCO0FBVUEsTUFBTWEsUUFBUSxHQUFHaEIsbUJBQW1CLEdBQUdDLGVBQWUsQ0FBQ2dCLGNBQWhCLEVBQUgsR0FBc0NoQixlQUExRTtBQUNBLE1BQU1pQixHQUFHLEdBQUdoQixTQUFTLEdBQUdjLFFBQVEsQ0FBQ0csR0FBVCxDQUFhakIsU0FBYixDQUFILEdBQTZCYyxRQUFsRCxDQWZzTCxDQWlCdEw7O0FBQ0FFLEVBQUFBLEdBQUcsQ0FBQ0UsSUFBSixDQUFTZCxPQUFULEVBQWtCLFVBQUNlLEdBQUQsRUFBUztBQUN2QixRQUFJLENBQUNBLEdBQUwsRUFBVTtBQUNOO0FBQ0g7O0FBQ0RDLElBQUFBLE9BQU8sQ0FBQ0MsS0FBUiw2Q0FBbURGLEdBQW5EO0FBQ0gsR0FMRDtBQU9BLFNBQU9MLFFBQVA7QUFDSDtBQUVEO0FBQ0E7QUFDQTs7O0FBQ08sU0FBU1EscUJBQVQsR0FBaUM7QUFDcEMsTUFBTUMsU0FBUyxHQUFHLDJCQUFsQjs7QUFDQSxNQUFJQSxTQUFTLENBQUNDLHFCQUFkLEVBQXFDO0FBQ2pDLFdBQU9ELFNBQVMsQ0FBQ0MscUJBQWpCO0FBQ0g7O0FBQ0RELEVBQUFBLFNBQVMsQ0FBQ0MscUJBQVYsR0FBa0MzQix3QkFBd0IsQ0FBQyxJQUFELEVBQU80QixnQkFBUCxFQUF1QixJQUF2QixFQUFvQyxJQUFwQyxFQUEwQ3BDLGtCQUFrQixDQUFDLElBQUQsQ0FBNUQsRUFBb0VxQyw4QkFBcEUsQ0FBMUQ7QUFDQSxTQUFPSCxTQUFTLENBQUNDLHFCQUFqQjtBQUNIIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGkxOG5leHQsIHsgaTE4biwgSW5pdE9wdGlvbnMsIFJlc291cmNlLCBUaGlyZFBhcnR5TW9kdWxlIH0gZnJvbSBcImkxOG5leHRcIlxyXG5pbXBvcnQgeyBjb252ZXJ0RW51bVRvTGlzdCwgaXNWYWx1ZUluRW51bSB9IGZyb20gXCIuLi9jb21tb24vZW51bVRvb2xcIlxyXG5pbXBvcnQgeyBpc1N0cmluZyB9IGZyb20gXCIuLi9jb21tb24vZGF0YVwiXHJcbmltcG9ydCB7IGdldEdsb2JhbE9iamVjdCB9IGZyb20gXCIuLi9jb21tb24vbGliXCJcclxuaW1wb3J0IHsgWEpzS2l0STE4blJlc291cmNlc0RhdGEgfSBmcm9tIFwiLi9kYXRhXCJcclxuXHJcbmV4cG9ydCBlbnVtIExhbmd1YWdlVHlwZUVudW0ge1xyXG4gICAg566A5L2T5Lit5paHID0gXCJ6aC1DTlwiLFxyXG4gICAg57mB6auU5Lit5paHID0gXCJ6aC1UV1wiLFxyXG4gICAgRW5nbGlzaCA9IFwiZW4tVVNcIixcclxuICAgIEZyYW7Dp2FpcyA9IFwiZnItRlJcIixcclxuICAgIERldXRzY2ggPSBcImRlLURFXCIsXHJcbiAgICBFc3Bhw7FvbCA9IFwiZXMtRVNcIixcclxuICAgIOaXpeacrOiqniA9IFwiamEtSlBcIixcclxuICAgIO2VnOq1reyWtCA9IFwia28tS1JcIlxyXG59XHJcbmV4cG9ydCBjb25zdCBMYW5ndWFnZVR5cGVFbnVtTGlzdCA9IGNvbnZlcnRFbnVtVG9MaXN0KExhbmd1YWdlVHlwZUVudW0pXHJcblxyXG4vKipcclxuICog6I635Y+W6buY6K6k6K+t6KiAXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RGVmYXVsdExhbmd1YWdlKGlzQ2hpbmE6IGJvb2xlYW4pIHtcclxuICAgIHJldHVybiBpc0NoaW5hID8gTGFuZ3VhZ2VUeXBlRW51bS7nroDkvZPkuK3mlocgOiBMYW5ndWFnZVR5cGVFbnVtLkVuZ2xpc2hcclxufVxyXG5cclxuLyoqXHJcbiAqIOiOt+WPlum7mOiupOeahOi0p+W4geespuWPt1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldERlZmF1bHRDdXJyZW5jeVN5bWJvbChpc0NoaW5hOiBib29sZWFuKSB7XHJcbiAgICByZXR1cm4gaXNDaGluYSA/IFwiwqVcIiA6IFwiJFwiXHJcbn1cclxuXHJcbi8qKlxyXG4gKiDojrflj5bmjIflrprlr7nosaHkuK3nmoTmn5DkuKror63oqIDoioLngrnkuK3nmoTmlbDmja7jgIJcclxuICog5aaC5p6cIGRhdGEg5piv5a2X56ym5Liy77yM5YiZ55u05o6l6L+U5Zue6K+l5a2X56ym5Liy77yb5aaC5p6c5pivIG9iamVjdO+8jOWImei/lOWbniBvYmplY3Rb5b2T5YmN6K+t6KiAXSDvvJvlpoLmnpwgb2JqZWN0W+W9k+WJjeivreiogF0g5rKh5pyJ5YC877yM5YiZ6L+U5ZueIG9iamVjdFvpu5jorqTor63oqIBdXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0TGFuZ3VhZ2VOb2RlRGF0YTxUPihkYXRhOiBzdHJpbmcgfCBSZWNvcmQ8TGFuZ3VhZ2VUeXBlRW51bSwgVD4sIGlzQ2hpbmE6IGJvb2xlYW4sIGxhbmc6IExhbmd1YWdlVHlwZUVudW0pIHtcclxuICAgIGlmICghZGF0YSkge1xyXG4gICAgICAgIHJldHVybiBudWxsXHJcbiAgICB9XHJcbiAgICAvL+WmguaenOaYr+Wtl+espuS4su+8jOWImeebtOaOpei/lOWbnuWOn+aVsOaNruWNs+WPr1xyXG4gICAgaWYgKGlzU3RyaW5nKGRhdGEpKSB7XHJcbiAgICAgICAgcmV0dXJuIGRhdGEgYXMgc3RyaW5nXHJcbiAgICB9XHJcbiAgICByZXR1cm4gKGRhdGEgYXMgUmVjb3JkPExhbmd1YWdlVHlwZUVudW0sIFQ+KVtsYW5nXSB8fCAoZGF0YSBhcyBSZWNvcmQ8TGFuZ3VhZ2VUeXBlRW51bSwgVD4pW2dldERlZmF1bHRMYW5ndWFnZShpc0NoaW5hKV1cclxufVxyXG5cclxuLyoqXHJcbiAqIOWIm+W7uuaIluWIneWni+WMliBpMThuIOWunuS+i+OAguazqOaEj++8mmRlZmF1bHRJbnN0YW5jZeOAgWluaXRSZWFjdCDlv4XpobvkvZzkuLrlj4LmlbDnlLHlhbfkvZPkvb/nlKjnmoTpobnnm67kvKDov4fmnaXvvIzlm6DkuLrmr4/kuKrpobnnm67nmoTpu5jorqTlrp7kvovkuI3kuIDmoLdcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVPckluaXRJMThuSW5zdGFuY2UoaXNDcmVhdGVOZXdJbnN0YW5jZTogYm9vbGVhbiwgZGVmYXVsdEluc3RhbmNlOiBpMThuLCBpbml0UmVhY3Q6IFRoaXJkUGFydHlNb2R1bGUsIGlzQ2hpbmE6IGJvb2xlYW4sIGxhbmc6IExhbmd1YWdlVHlwZUVudW0sIHRyYW5zRGF0YTogUmVzb3VyY2UpIHtcclxuICAgIGNvbnN0IGRlZmF1bHRMYW5nID0gZ2V0RGVmYXVsdExhbmd1YWdlKGlzQ2hpbmEpXHJcbiAgICBjb25zdCBjdXJyZW50TGFuZyA9IGxhbmcgJiYgaXNWYWx1ZUluRW51bShMYW5ndWFnZVR5cGVFbnVtLCBsYW5nKSA/IGxhbmcgOiBkZWZhdWx0TGFuZ1xyXG5cclxuICAgIGNvbnN0IGluaXRPcHM6IEluaXRPcHRpb25zID0ge1xyXG4gICAgICAgIGxuZzogY3VycmVudExhbmcsXHJcbiAgICAgICAgc3VwcG9ydGVkTG5nczogTGFuZ3VhZ2VUeXBlRW51bUxpc3QubWFwKChrKSA9PiBrLnZhbHVlKSxcclxuICAgICAgICBmYWxsYmFja0xuZzogZGVmYXVsdExhbmcsXHJcbiAgICAgICAgaW50ZXJwb2xhdGlvbjoge1xyXG4gICAgICAgICAgICBlc2NhcGVWYWx1ZTogZmFsc2VcclxuICAgICAgICB9LFxyXG4gICAgICAgIHJlc291cmNlczogdHJhbnNEYXRhXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgaW5zdGFuY2UgPSBpc0NyZWF0ZU5ld0luc3RhbmNlID8gZGVmYXVsdEluc3RhbmNlLmNyZWF0ZUluc3RhbmNlKCkgOiBkZWZhdWx0SW5zdGFuY2VcclxuICAgIGNvbnN0IGlucyA9IGluaXRSZWFjdCA/IGluc3RhbmNlLnVzZShpbml0UmVhY3QpIDogaW5zdGFuY2VcclxuXHJcbiAgICAvL+WIneWni+WMluWunuS+i1xyXG4gICAgaW5zLmluaXQoaW5pdE9wcywgKGVycikgPT4ge1xyXG4gICAgICAgIGlmICghZXJyKSB7XHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zb2xlLmVycm9yKGBJbml0IGRlZmF1bHQgaTE4biBpbnN0YW5jZSBlcnJvcjogJHtlcnJ9YClcclxuICAgIH0pXHJcblxyXG4gICAgcmV0dXJuIGluc3RhbmNlXHJcbn1cclxuXHJcbi8qKlxyXG4gKiDojrflj5blvZPliY3nu4Tku7blupPnmoQgaTE4biDlrp7kvovjgILov5nph4zkvJrlsIYgaTE4biDlrp7kvovmjILovb3liLDlhajlsYDlj5jph4/kuIrvvIzkvpvkuI3lkIznu4Tku7bot6jmqKHlnZforr/pl67jgILkuLrku4DkuYjopoHov5nmoLflgZrvvJ/lm6DkuLrov5nkuKrnu4Tku7blupPkuK3nmoTmr4/kuIDkuKrnu4Tku7bmnIDnu4jmmK/liIbliKsgYnVpbGQg5oiQ5LiA5Liq54us56uL55qE5YyF77yM57uE5Lu25LiO57uE5Lu25piv6ZqU56a755qE77yM5bm25rKh5pyJ5pWw5o2u5YWx5Lqr5py65Yi277yM5aaC5p6c5LiN6L+Z5qC35YGa77yM6YKj5LmI5q+P5Liq5omT5YyF5ZCO55qE57uE5Lu26YO95pyJ6Ieq5bex55qEIGkxOG4g5a6e5L6L44CCXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0WEpzS2l0STE4bkluc3RhbmNlKCkge1xyXG4gICAgY29uc3QgZ2xvYmFsT2JqID0gZ2V0R2xvYmFsT2JqZWN0KCkgYXMgYW55XHJcbiAgICBpZiAoZ2xvYmFsT2JqLl9fX3hKc0tpdEkxOG5JbnN0YW5jZSkge1xyXG4gICAgICAgIHJldHVybiBnbG9iYWxPYmouX19feEpzS2l0STE4bkluc3RhbmNlIGFzIHR5cGVvZiBpMThuZXh0XHJcbiAgICB9XHJcbiAgICBnbG9iYWxPYmouX19feEpzS2l0STE4bkluc3RhbmNlID0gY3JlYXRlT3JJbml0STE4bkluc3RhbmNlKHRydWUsIGkxOG5leHQgYXMgYW55LCBudWxsIGFzIGFueSwgdHJ1ZSwgZ2V0RGVmYXVsdExhbmd1YWdlKHRydWUpLCBYSnNLaXRJMThuUmVzb3VyY2VzRGF0YSlcclxuICAgIHJldHVybiBnbG9iYWxPYmouX19feEpzS2l0STE4bkluc3RhbmNlIGFzIHR5cGVvZiBpMThuZXh0XHJcbn1cclxuIl19